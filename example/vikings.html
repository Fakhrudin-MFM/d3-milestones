<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>The Viking Timeline</title>
  <link rel="stylesheet" href="../build/d3-milestones.css">
  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style>
    body {
      font-family: sans-serif;
    }

    h1 {
      font-size: 1.5em;
    }

    #timeline {
      height: 800px;
      width: 100%;
    }
</style>
</head>

<body id="home">
  <h1>The Viking Timeline</h2>
    <form>
      <table><tbody>
        <tr>
          <td><label for="checkbox-optimize">Optimize Label Layout</label></td>
          <td><input id="checkbox-optimize" type="checkbox" checked /></td>
        </tr>
        <tr>
          <td><label for="select-orientation">Orientation</label></td>
          <td>
            <select id="select-orientation">
              <option value="horizontal" selected>Horizontal</option>
              <option value="vertical" >Vertical</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="select-distribution">Label arrangement</label></td>
          <td>
            <select id="select-distribution">
              <option value="top-bottom" selected>top-bottom</option>
              <option value="top">top</option>
              <option value="bottom" >bottom</option>
            </select>
          </td>
        </tr>
      </table>
    </form>
    <div id="timeline"></div>
  <script src="../build/d3-milestones.js"></script>
  <script>
    data = [
      { year: 789, title: 'Vikings begin attacks on England.' },
      { year: 800, title: 'The Oseberg Viking longship buried' },
      { year: 840, title: 'Vikings found Dublin in Ireland.' },
      { year: 844, title: 'A Viking raid on Seville is repulsed.' },
      { year: 860, title: 'Rus Vikings attack Constantinople.' },
      { year: 862, title: 'Novgorod in Russia is founded by the Rus Viking, Ulrich.' },
      { year: 866, title: 'Danish Vikings establish a kingdom in York, England.' },
      { year: 871, title: 'Danish advance is halted in England.' },
      { year: 872, title: 'Harald I gains control of Norway.' },
      { year: 879, title: 'Rurik establishes Kiev as the center of the Kievan Rus\' domains.' },
      { year: 886, title: 'Alfred divides England with the Danes under the Danelaw pact.' },
      { year: 900, title: 'The Vikings raid along the Mediterranean coast.' },
      { year: 911, title: 'The Viking chief Rollo founds Normandy in France.' },
      { year: 941, title: 'Rus Vikings attack Constantinople(Istanbul).' },
      { year: 981, title: 'Viking leader Erik the Red discovers Greenland.' },
      { year: 986, title: 'Viking ships sail in Newfoundland waters.' },
      { year: 995, title: 'Olav I conquers Norway and proclaims it a Christian kingdom.' },
      { year: 1000, title: 'Christianity reaches Greenland and Iceland.' },
      { year: 1000, title: 'Leif Eriksson, explores the coast of North America.' },
      { year: 1000, title: 'Olav I dies; Norway is ruled by the Danes.' },
      { year: 1002, title: 'Brian Boru defeats the Norse and becomes the king of Ireland.' },
      { year: 1013, title: 'The Danes conquer England; Ã†thelred flees to Normandy.' },
      { year: 1015, title: 'Vikings abandon the Vinland settlement on the coast of North America.' },
      { year: 1016, title: 'Olav II regains Norway from the Danes.' },
      { year: 1016, title: 'The Danes under Knut(Canute) rule England.' },
      { year: 1028, title: 'Knut(Canute), king of England and Denmark, conquers Norway.' },
      { year: 1042, title: 'Edward the Confessor rules England with the support of the Danes.' },
      { year: 1050, title: 'The city of Oslo is founded in Norway.' },
      { year: 1066, title: 'Battle of Stamford Bridge' },
      { year: 1066, title: 'Battle of Hastings.' }
    ];

    var timeline = milestones('#timeline')
      .mapping({
        'timestamp': 'year',
        'text': 'title'
      })
      .parseTime('%Y')
      .aggregateBy('year');

    var checkboxOptimize = document.getElementById('checkbox-optimize');
    var selectOrientation = document.getElementById('select-orientation');
    var selectDistribution = document.getElementById('select-distribution');

    function update() {
      timeline
        .optimize(checkboxOptimize.checked)
        .orientation(selectOrientation.options[selectOrientation.selectedIndex].value)
        .distribution(selectDistribution.options[selectDistribution.selectedIndex].value)
        .render(data);
    }

    checkboxOptimize.onclick = update;
    selectOrientation.onchange = update;
    selectDistribution.onchange = update;

    update();
</script>
</body>
</html>
